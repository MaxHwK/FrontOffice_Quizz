{% extends 'layout.html.twig' %}

{% block title %}Liste des Utilisateurs{% endblock %}

{% block css %}
    <link rel="stylesheet" href="/assets/css/admin/listUser.css">
{% endblock %}

{% block toggler %} 
    <a class="nav-link" href="/admin"><i class="bi bi-tools"></i> Administation <span class="sr-only"><span class="sr-only"></span></a>
    <a class="nav-link active" href="/user"><i class="bi bi-people-fill"></i> Utilisateurs <span class="sr-only"></span></a>
    <a class="nav-link" href="/question"><i class="bi bi-question-circle-fill"></i> Questions <span class="sr-only"></span></a>
    <a class="nav-link deconnexion" href="/disconnection"><i class="bi bi-x-circle-fill"></i> Se déconnecter <span class="sr-only"></span></a>
{% endblock %}

{% block navbar %}  
    <a class="nav-link text-center" href="/admin"><i class="bi bi-tools"></i>Administation <span class="sr-only"></span></a>
    <a class="nav-link active text-center" href="/user"><i class="bi bi-people-fill"></i>Utilisateurs <span class="sr-only"></span></a>
    <a class="nav-link text-center" href="/question"><i class="bi bi-question-circle-fill"></i>Questions <span class="sr-only"></span></a>
    <a class="nav-link text-center deconnexion" href="/disconnection"><i class="bi bi-x-circle-fill"></i>Se déconnecter<span class="sr-only"></span></a>  
{% endblock %}

{% block body %}
    <div class="infocontainer">
        <div class="infolandscape p-1 mb-1 bg-light text-dark text-center"><i class="bi bi-info-circle-fill"></i> Veuillez passer en mode paysage pour avoir une meilleure expérience d'utilisation.</div>
        <br>
    </div>
    
    <div class="container">
        <table class="table table-striped table-dark text-center align-middle">
            <thead>
                <tr>
                    <th scope="col" id="id">Id</th>
                    <th scope="col" id="username">Nom d'utilisateur</th>
                    <th scope="col" id="firstname">Prenom</th>
                    <th scope="col" id="lastname">Nom</th>
                    <th scope="col" id="email">Email</th>
                    <th scope="col" id="role">Rôles</th>
                    <th scope="col" id="date">Date de création</th>
                    <th scope="col" id="action">Action</th>
                </tr>
            </thead>

            <tbody>
                {% for user in users %}
                    <tr>
                        <th scope="row">{{ user.id }}</th>
                        <td>{{ user.username }}</td>
                        <td>{{ user.firstName }}</td>
                        <td>{{ user.lastName }}</td>
                        <td>{{ user.email }}</td>
                        <td>{% for role in user.role %}
                                {{ role }} 
                            {% endfor %}
                        </td>
                        <td>{{ user.createdAt }}</td>
                        <td>
                            <a href="/userupdate?iduser={{ user.id }}" class="btn btn-warning btn-sm">Modifier</a>
                            <a href="?iduser={{ user.id }}" data-id="{{ user.id }}" class="btn btn-danger btn-sm delete-user">Supprimer</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}

{% block js %}
    <script src="/js/delete.js"></script>
{% endblock %}
